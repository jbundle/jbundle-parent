<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
  <modelVersion>4.0.0</modelVersion>

  <!-- ***** NOTE: ******
  Before Releasing, remove all -SNAPSHOTs from properties (put them back afterwards)
  Remove release repository (should be maven central for oss)
  Also, change <snapshots> to false.
   *********** -->
  <parent>
    <artifactId>oss-parent</artifactId>
    <groupId>org.sonatype.oss</groupId>
    <version>6</version>
  </parent>

  <groupId>org.jbundle.config</groupId>
  <artifactId>jbundle-parent</artifactId>
  <version>1.0.4-SNAPSHOT</version>
  <packaging>pom</packaging>

  <name>jbundle-parent - Shared properties</name>
  <description>Top level properties and features</description>
  <url>http://www.jbundle.org</url>

  <organization>
  	<name>jbundle.org</name>
  	<url>http://www.jbundle.org</url>
  </organization>

  <developers>
  	<developer>
  		<id>doncorley</id>
  		<name>Don Corley</name>
  		<email>don@tourgeek.com</email>
  		<url>http://www.tourgeek.com</url>
  		<timezone>-8</timezone> <!-- -8:00 PDT â€“ Pacific Daylight Time (UTC -08:00) -->
  	</developer>
  </developers>

  <properties>
    <releaseRepository>http://releases.jbundle.org:8081/nexus/content/repositories/releases</releaseRepository>
    <snapshotRepository>http://snapshots.jbundle.org:8081/nexus/content/repositories/snapshots</snapshotRepository>
    <publicRepository>http://repository.jbundle.org:8081/nexus/content/groups/public</publicRepository>
    <stagingRepository>http://repository.jbundle.org:8081/nexus/content/groups/public</stagingRepository>
    <publicReleaseRepository>http://repository.jbundle.org:8081/nexus/content/groups/public</publicReleaseRepository>

    <!-- OBRRepositoryIndex>jbundle-snapshot-obr.xml</OBRRepositoryIndex -->	<!-- Doesn't work for snapshots - turn it off and use bindex -->
    <OBRRepositoryIndex>NONE</OBRRepositoryIndex>	<!-- Set to NONE if not used -->
    <OBRRepositoryIndexURL>${project.organization.url}/${OBRRepositoryIndex}</OBRRepositoryIndexURL>	<!-- Full URL to the repository ? This SHOULD be the same as the OBRRepositoryIndex in the manifest -->
    <jbundleScmPath>jbundle-parent</jbundleScmPath>

    <jbundlePackage>${project.artifactId}</jbundlePackage>	<!-- artifactId is usually the package -->
    <jbundlePackageFilter>${jbundlePackage}.*</jbundlePackageFilter>	<!-- All packages in this filter and beyond -->
    <jbundlePackageExport>${jbundlePackageFilter};version=${project.version}</jbundlePackageExport>	<!-- Bundle package to export -->
    <jbundlePackageImport>*;resolution:=optional</jbundlePackageImport>
    <jbundleMainClass>org.jbundle.Main</jbundleMainClass>

    <!-- Move these to settings -->
    <jbundle.workspace>${user.home}/workspace/workspace</jbundle.workspace>
    <jbundle.policyfile>${jbundle.workspace}/workspace/tourapp-root/bin/policy/policy.all</jbundle.policyfile>
    <jbundle.server>linux-laptop</jbundle.server>
    <jbundle.codebase>${jbundle.server}:8080/</jbundle.codebase>
    <jbundle.rmicodebase>http://${jbundle.codebase}/classes/</jbundle.rmicodebase>

    <jbundleVersion>0.7.8-SNAPSHOT</jbundleVersion>

    <jbundle-calendarpanelVersion>0.8.1</jbundle-calendarpanelVersion>
    <jbundle-jcalendarbuttonVersion>1.5.3</jbundle-jcalendarbuttonVersion>
    <jbundle-utilVersion>0.7.8-SNAPSHOT</jbundle-utilVersion>
    <jbundle-util-muffinmanagerVersion>0.7.7</jbundle-util-muffinmanagerVersion>
    <jbundle-util-wsdlVersion>0.7.7</jbundle-util-wsdlVersion>

    <jbundleOsgiVersion>1.1.2-SNAPSHOT</jbundleOsgiVersion>
    <jbundle-util-webappVersion>0.9.2-SNAPSHOT</jbundle-util-webappVersion>

    <jbundle-app-contactVersion>0.7.7-SNAPSHOT</jbundle-app-contactVersion>
    <jbundle-app-pictureVersion>0.7.7-SNAPSHOT</jbundle-app-pictureVersion>
    <jbundle-app-danceVersion>0.7.7-SNAPSHOT</jbundle-app-danceVersion>

    <tourappVersion>0.7.7-SNAPSHOT</tourappVersion>
    
    <jibxVersion>1.2.3</jibxVersion>
    <jibxSchemaVersion>1.0.0</jibxSchemaVersion>
    <otaVersion>1.1.0</otaVersion>
    <base64coderVersion>2010-12-19</base64coderVersion>
    <tycho-version>0.11.0</tycho-version>
    <osgi.version>4.2.0</osgi.version>
    <felix.bundlerepository.version>1.6.4</felix.bundlerepository.version>

    <javawsVersion>${java.specification.version}</javawsVersion>
    <pluginVersion>${java.specification.version}</pluginVersion>

    <dojoVersion>1.5.0</dojoVersion>
  </properties>
  
  <profiles>
    <profile> 
      <id>sonatype-oss-release</id>
      <properties>
        <OBRRepositoryIndex>repository.xml</OBRRepositoryIndex>	<!-- Set to NONE if not used -->
<!-- releaseRepository>http://localhost:8081/nexus/content/repositories/releases/</releaseRepository -->
        <releaseRepository>http://oss.sonatype.org/service/local/staging/deploy/maven2</releaseRepository>
        <snapshotRepository>http://oss.sonatype.org/content/repositories/snapshots</snapshotRepository>
        <publicRepository>http://oss.sonatype.org/content/groups/public</publicRepository>
        <stagingRepository>http://oss.sonatype.org/content/groups/staging</stagingRepository>
<!-- publicReleaseRepository>http://localhost:8081/nexus/content/groups/public</publicReleaseRepository -->
        <publicReleaseRepository>http://repo2.maven.org/maven2</publicReleaseRepository>
      </properties>
    </profile>
  </profiles>
  
  <licenses>
    <license>
      <name>The GNU General Public License, Version 3.0</name>
      <url>http://www.gnu.org/licenses/gpl.txt</url>
      <distribution>repo</distribution>
    </license>
  </licenses>

  <scm>
    <url>https://github.com/jbundle/jbundle-parent</url>
    <connection>scm:git:git://github.com/jbundle/jbundle-parent.git</connection>
    <developerConnection>scm:git:git@github.com:jbundle/jbundle-parent.git</developerConnection>
  </scm>

  <ciManagement>
    <system>Hudson</system>
    <url>www.jbundle.org/hudson</url>
    <notifiers>
      <notifier>
        <address>don@tourgeek.com</address>
      </notifier>
    </notifiers>
  </ciManagement>
  
  <issueManagement>
    <system>github issues</system>
    <url>https://github.com/jbundle/jbundle/issues</url>
  </issueManagement>
  
  <distributionManagement>
    <snapshotRepository>
      <id>sonatype-nexus-snapshots</id>
      <name>Nexus Snapshot Repository</name>
      <url>${snapshotRepository}</url>
      <uniqueVersion>true</uniqueVersion>
    </snapshotRepository>
    <repository>
      <id>sonatype-nexus-staging</id>
      <name>Nexus Release Repository</name>
      <url>${releaseRepository}</url>
    </repository>
  </distributionManagement>

  <repositories>
    <repository>
      <id>jbundle-repository</id>
      <name>jbundle-repository</name>
      <url>http://repository.jbundle.org:8081/nexus/content/groups/public</url>
      <snapshots>
        <enabled>true</enabled>
      </snapshots>
      <releases>
        <enabled>true</enabled>
      </releases>
    </repository>
  </repositories>

  <build>
    <plugins>
      <plugin>
        <inherited>true</inherited>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-compiler-plugin</artifactId>
        <configuration>
          <source>1.6</source>  <!-- By default, I target java 6 -->
          <target>1.6</target>
        </configuration>
      </plugin>
      
      <plugin>
        <groupId>org.apache.felix</groupId>
        <artifactId>maven-bundle-plugin</artifactId>
        <extensions>true</extensions>
        <configuration>
	  <prefixUrl>${publicReleaseRepository}</prefixUrl>
	  <remoteOBR>${OBRRepositoryIndex}</remoteOBR>
	  <!-- The obr is copied to the site root in the jbundle-site project -->
	  <altDeploymentRepository>local-file::default::file:///${jbundle.workspace}/bin/obr</altDeploymentRepository>
          <!--
	  	repository name (not file name or path, although remoteOBR defaults to this)
		- careful, this doesn't work for snapshots becuase the filename has the -xxxxx-xxx extension
	  <remoteOBR>${OBRRepositoryIndex}</remoteOBR >	< Please update the remote OBR at root location, repository.xml >
	  	The filename of the remote obj (uses name if blank)
	  <obrRepository>sonatype-nexus-staging::obr::file://home/don/temp/snapshot-obr</obrRepository>
	  	optional public URL prefix for the remote repository
	  <prefixUrl>http://releases.jbundle.org:8081/nexus/content/repositories/snapshot-prefix</prefixUrl>
	  	optional public URL where the bundle has been deployed
	  <bundleUrl>http://releases.jbundle.org:8081/nexus/content/repositories/snapshot-obr/${project.artifact}</bundleUrl>
		  By default, deploys to the snapshot/release repository in distribution mgmt, else goes here
	  <altDeploymentRepository>sonatype-nexus-staging::obr::file://releases.jbundle.org:8081/nexus/content/repositories/snapshot-alt</altDeploymentRepository>
	  	This ends up in the manifest as is
	  <obrRepository>http://snapshots.jbundle.org:8081/nexus/content/repositories/snapshot-obr</obrRepository>
	  	optional OBR specific deployment repository.
	  <obrDeploymentRepository>sonatype-nexus-staging::obr::http://snapshots.jbundle.org:8081/nexus/content/repositories/snapshot-obr-deploy</obrDeploymentRepository>
	  -->
          <instructions>
            <Bundle-ManifestVersion>2</Bundle-ManifestVersion>
            <Bundle-SymbolicName>${project.groupId}.${project.artifactId}</Bundle-SymbolicName>	<!-- This is better name than the package -->
            <Bundle-Version>${project.version}</Bundle-Version>	<!-- Just being careful -->
            <Export-Package>${jbundlePackageExport}</Export-Package>	<!-- Override jbundlePackage or jbundlePackageExport with actual packages -->
            <Import-Package>${jbundlePackageImport}</Import-Package>	<!-- Since I want these to be optional -->
          </instructions>
        </configuration>
      </plugin>

      <!-- plugin>
        <groupId>org.apache.felix</groupId>
        <artifactId>maven-ipojo-plugin</artifactId>
        <executions>
          <execution>
            <goals>
              <goal>ipojo-bundle</goal>
            </goals>
	        <configuration>
	             <metadata>src/main/ipojo/metadata.xml</metadata>
	        </configuration>
          </execution>
        </executions>
      </plugin -->
      
      <!-- plugin>
	    <groupId>org.sonatype.maven.plugins</groupId>
	    <artifactId>maven-p2-publisher-plugin</artifactId>
	    <version>0.2.0</version>
      </plugin -->

 <!-- Override the signing plugin to supply my keystore passphrase (in settings.xml) -->
  <!-- Match version in my parent oss.sonatype... -->
<!-- 
		<plugin>
			<groupId>org.apache.maven.plugins</groupId> 
			<artifactId>maven-gpg-plugin</artifactId> 
			<version>1.1</version>
			<executions> 
				<execution> 
					<id>sign-artifacts</id> 
					<phase>verify</phase> 
					<goals> 
						<goal>sign</goal> 
					</goals> 
					<configuration>
						<passphrase>${gpg.passphrase}</passphrase>
					</configuration>
				</execution> 
			</executions> 
		</plugin> 
-->
    </plugins>
    <pluginManagement>
      <plugins>
        <plugin>
          <groupId>org.jibx</groupId>
          <artifactId>maven-jibx-plugin</artifactId>
          <version>${jibxVersion}</version>
        </plugin>
        <plugin>
          <groupId>org.jibx</groupId>
          <artifactId>jibx-maven-plugin</artifactId>
          <version>${jibxVersion}</version>
        </plugin>
        <plugin>
		    <groupId>org.apache.maven.plugins</groupId>
		    <artifactId>maven-resources-plugin</artifactId>
		    <version>2.4.3</version>
        </plugin>
        <plugin>
		    <groupId>org.apache.maven.plugins</groupId>
		    <artifactId>maven-site-plugin</artifactId>
		    <version>3.0-beta-3</version>
        </plugin>
        <plugin>
		    <groupId>org.apache.maven.plugins</groupId>
		    <artifactId>maven-compiler-plugin</artifactId>
		    <version>2.3.2</version>
        </plugin>
        <plugin>
	        <groupId>org.apache.maven.plugins</groupId>
	        <artifactId>maven-jar-plugin</artifactId>
	        <version>2.3.1</version>
        </plugin>
        <plugin>
          <groupId>org.apache.felix</groupId>
          <artifactId>maven-bundle-plugin</artifactId>
          <version>2.3.4</version>
        </plugin>
        <plugin>
          <groupId>org.apache.maven.plugins</groupId>
          <artifactId>maven-antrun-plugin</artifactId>
          <version>1.3</version>
        </plugin>
        <plugin>
          <groupId>org.apache.maven.plugins</groupId>
          <artifactId>maven-assembly-plugin</artifactId>
          <version>2.2</version>
        </plugin>
      <plugin>
          <groupId>org.apache.maven.plugins</groupId>
          <artifactId>maven-dependency-plugin</artifactId>
          <version>2.1</version>
      </plugin>
      <plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>exec-maven-plugin</artifactId>
        <version>1.2</version>
      </plugin>
      <plugin>
        <groupId>org.codehaus.mojo.webstart</groupId>
        <artifactId>webstart-maven-plugin</artifactId>
        <version>1.0-beta-1</version>
      </plugin>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-war-plugin</artifactId>
        <version>2.1.1</version>
      </plugin>
      <plugin>
        <groupId>org.mortbay.jetty</groupId>
        <artifactId>jetty-maven-plugin</artifactId>
        <version>8.0.0.M2</version>
      </plugin>
      <plugin>
        <groupId>org.jvnet.jaxb2.maven2</groupId>
        <artifactId>maven-jaxb2-plugin</artifactId>
        <version>0.7.4</version>
      </plugin>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-project-info-reports-plugin</artifactId>
        <version>2.3.1</version>
      </plugin>
      </plugins>
    </pluginManagement>

    <extensions> 
      <extension> 
        <groupId>org.apache.maven.wagon</groupId> 
         <artifactId>wagon-ssh</artifactId> 
         <version>1.0-beta-7</version> 
      </extension> 
    </extensions> 

  </build>

  <reporting>
    <plugins>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-project-info-reports-plugin</artifactId>
        <version>2.3.1</version>
      </plugin>
    </plugins>
  </reporting>

  <dependencies>
    <dependency>
      <groupId>junit</groupId>
      <artifactId>junit</artifactId>
      <scope>test</scope>
    </dependency>
  </dependencies>
  
  <!-- TODO Should move this to a dependency POM and do an import (only works after maven 2.0.9) -->
  <dependencyManagement>
    <dependencies>
    <!-- These are mine -->
    <dependency>
      <groupId>org.jbundle.util.osgi</groupId>
      <version>${jbundleOsgiVersion}</version>
      <artifactId>org.jbundle.util.osgi</artifactId>
    </dependency>
    <dependency>
      <groupId>org.jbundle.util.webapp</groupId>
      <artifactId>org.jbundle.util.webapp.redirect</artifactId>
      <version>${jbundle-util-webappVersion}</version>
    </dependency>
	<dependency>
	  <groupId>org.jbundle.util.webapp</groupId>
	  <artifactId>org.jbundle.util.webapp.jnlpservlet</artifactId>
	  <version>${jbundle-util-webappVersion}</version>
	</dependency>
    <dependency>
      <groupId>org.jbundle.util.calendarpanel</groupId>
      <artifactId>org.jbundle.util.calendarpanel</artifactId>
      <version>${jbundle-calendarpanelVersion}</version>
    </dependency>
    <dependency>
      <groupId>org.jbundle.util.jcalendarbutton</groupId>
      <artifactId>org.jbundle.util.jcalendarbutton</artifactId>
      <version>${jbundle-jcalendarbuttonVersion}</version>
    </dependency>
    <dependency>
      <groupId>org.jbundle.util</groupId>
      <artifactId>org.jbundle.util.muffinmanager</artifactId>
      <version>${jbundle-util-muffinmanagerVersion}</version>
    </dependency>
    
    <!-- External dependencies -->
    <dependency>
      <groupId>org.jibx</groupId>
      <artifactId>jibx-run</artifactId>
      <version>${jibxVersion}</version>
    </dependency>
    <dependency>
      <groupId>org.jibx</groupId>
      <artifactId>jibx-extras</artifactId>
      <version>${jibxVersion}</version>
    </dependency>
    <dependency>
      <groupId>org.jibx</groupId>
      <artifactId>jibx-bind</artifactId>
      <version>${jibxVersion}</version>
    </dependency>
    <dependency>
      <groupId>org.jibx</groupId>
      <artifactId>jibx-schema</artifactId>
      <version>${jibxVersion}</version>
    </dependency>
    <dependency>
      <groupId>org.jibx</groupId>
      <artifactId>jibx-tools</artifactId>
      <version>${jibxVersion}</version>
    </dependency>
    <dependency>
      <groupId>org.osgi</groupId>
      <artifactId>org.osgi.core</artifactId>
      <version>${osgi.version}</version>
    </dependency>
	<dependency>
		<groupId>org.osgi</groupId>
		<artifactId>org.osgi.compendium</artifactId>
		<version>${osgi.version}</version>
	</dependency>
            <dependency>
                <groupId>org.apache.felix</groupId>
                <artifactId>org.apache.felix.bundlerepository</artifactId>
                <version>${felix.bundlerepository.version}</version>
                <exclusions>
                    <exclusion>
                        <groupId>org.apache.felix</groupId>
                        <artifactId>org.osgi.service.obr</artifactId>
                    </exclusion>
                    <exclusion>
                        <groupId>org.apache.felix</groupId>
                        <artifactId>org.apache.felix.shell</artifactId>
                    </exclusion>
                    <exclusion>
                        <groupId>net.sf.kxml</groupId>
                        <artifactId>kxml2</artifactId>
                    </exclusion>
                    <exclusion>
                        <groupId>org.osgi</groupId>
                        <artifactId>org.osgi.core</artifactId>
                    </exclusion>
                    <exclusion>
                        <groupId>org.easymock</groupId>
                        <artifactId>easymock</artifactId>
                    </exclusion>
                </exclusions>
            </dependency>
    <dependency>
      <groupId>junit</groupId>
      <artifactId>junit</artifactId>
      <version>3.8.1</version>
    </dependency>
	<dependency>
	  <groupId>log4j</groupId>
	  <artifactId>log4j</artifactId>
	  <version>1.2.16</version>
	</dependency>
    <dependency>
      <groupId>org.codehaus.mojo.webstart</groupId> <!-- Hopefully this will become available from java.net -->
      <artifactId>webstart-jnlp-servlet</artifactId>
      <version>1.0-6.0.02_ea_b02.1</version>
    </dependency>
    <dependency>
      <groupId>jardiff</groupId>
      <artifactId>jardiff</artifactId>
      <version>0.2</version>
    </dependency>
    <dependency>     <!-- **** NOTE: This should be a 'runtime' dependency! Fix your code ***** -->
      <groupId>mysql</groupId>
      <artifactId>mysql-connector-java</artifactId>
      <version>5.1.14</version>
    </dependency>
    <dependency>
      <groupId>org.apache.httpcomponents</groupId>
      <artifactId>httpclient</artifactId>
      <version>4.0.1</version>
    </dependency>
    <dependency>
      <groupId>org.apache.tomcat</groupId>
      <artifactId>catalina</artifactId>
      <version>6.0.29</version>
    </dependency>
    <dependency>
      <groupId>jtidy</groupId>  <!-- net.sourceforge.jtidy -->
      <artifactId>jtidy</artifactId>
      <version>4aug2000r7-dev</version>
    </dependency>
    <dependency>
      <groupId>org.json</groupId>
      <artifactId>json</artifactId>
      <version>20090211</version>
    </dependency>
    <dependency>
      <groupId>javax.servlet</groupId>
      <artifactId>servlet-api</artifactId>
      <version>2.5</version>
    </dependency>
    <dependency>
      <groupId>servlets.com</groupId>
      <artifactId>cos</artifactId>
      <version>05Nov2002</version>
    </dependency>
    <dependency>
      <groupId>javax.mail</groupId>
      <artifactId>mail</artifactId>    <!-- This is in the java.net repository -->
      <version>1.4.4</version>
    </dependency>
    <dependency>
      <groupId>com.sun.messaging.mq</groupId>
      <artifactId>jaxm-api</artifactId>
      <version>4.4.2</version>
    </dependency>
	<dependency>
	  <groupId>xpp3</groupId>
	  <artifactId>xpp3</artifactId>
	  <version>1.1.3.4.O</version>
	</dependency>
    <dependency>
       <groupId>org.jdom</groupId>
       <artifactId>jdom</artifactId>
       <version>1.1</version>
    </dependency>
	<dependency>
	  <groupId>joda-time</groupId>
	  <artifactId>joda-time</artifactId>
	  <version>1.6.2</version>
	</dependency>
	<dependency>
	   <groupId>biz.source_code</groupId>
	   <artifactId>base64coder</artifactId>
	   <version>${base64coderVersion}</version>
	</dependency>
	<dependency>
	  <groupId>org.jibx.schema.org.opentravel._2010B</groupId>
	  <artifactId>org.jibx.schema.org.opentravel._2010B.ping</artifactId>
	  <version>${jibxSchemaVersion}</version>
	</dependency>
	<dependency>
	  <groupId>org.jibx.schema.org.opentravel._2010B</groupId>
	  <artifactId>org.jibx.schema.org.opentravel._2010B.hotel</artifactId>
	  <version>${jibxSchemaVersion}</version>
	</dependency>
	<dependency>
	  <groupId>org.jibx.schema.org.xmlsoap.schemas</groupId>
	  <artifactId>org.jibx.schema.org.xmlsoap.schemas.wsdl</artifactId>
	  <version>${jibxSchemaVersion}</version>
	</dependency>
	<dependency>
	  <groupId>org.jibx.schema.org.w3</groupId>
	  <artifactId>org.jibx.schema.org.w3._2006._03.wsdl.wsdl20</artifactId>
	  <version>${jibxSchemaVersion}</version>
	</dependency>
    <dependency>
      <groupId>org.jibx.schema.net.webservicex</groupId>
      <artifactId>org.jibx.schema.net.webservicex.currencyconvertor</artifactId>
      <version>${jibxSchemaVersion}</version>
    </dependency>
    </dependencies>
  </dependencyManagement>
  
</project>
